<!DOCTYPE html >
<!-- Load internationalisation utils-->
{% load i18n %}
<html>

<head>
    {% load staticfiles %}
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{app.site.entreprise.name}}{% trans "Dashboard v.1" %}</title>
    <link href="{% static 'INSPINIA-theme/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'INSPINIA-theme/css/bootstrap.css' %}" rel="stylesheet">
    <link href="{% static 'INSPINIA-theme/font-awesome/css/font-awesome.css' %}" rel="stylesheet">
    <link href="{% static 'INSPINIA-theme/css/animate.css' %}" rel="stylesheet">
    <link href="{% static 'INSPINIA-theme/css/style.css' %}" rel="stylesheet">
    <link href="{% static 'jquery-ui-1.11.4/jquery-ui.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/styles.css' %}" rel="stylesheet">
    <link href="{% static 'css/ui.datepicker.css' %}" rel="stylesheet">

    <!--TODO Check for create a .js-->
<script type="text/javascript">
    function updateMenu(value){
    var Class = ["menuIrl", "menuTrl", "menuExperiment", "menuBusinessCanvas", "menuFinance", "menuValuePropositionCanvas"];
    var Link = ["/kpi/irl/", "/kpi/trl/", "/experiment/", "/businessCanvas/", "/finance/", "/valuePropositionCanvas/"];
        for (var i = 0; i < Class.length; i++) {
            //Reference of the link
            var lien = document.getElementsByClassName(Class[i])[0];
            lien.href = Link[i]+value;
            //Visibility of the link
            if(value == 0){
                lien.style.visibility= 'hidden';
            }
            else{
                lien.style.visibility= 'visible';
            }
        }
        // GET for set the session variable

        var lien = "/setCompanyInSession/"+value;
        $.ajax({
          type: 'GET',
          url: lien,

          error: function(resultat, status, erreur) {
                alert("erreur setSessionVariable -> " + resultat + status + erreur);
            }
        });
    }
</script>

    {% block extrahead %}{% endblock %}
</head>
<body>
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element"> <span>
                            <img alt="image" class="img-circle" src="{% static 'img/centech-logo.png' %}" width="50"/>
                             </span>
                    </div>
                    <div class="logo-element">
                        <img src="{% static 'img/centech-logo.png' %}" width="40">
                    </div>
                </li>
                <li class="active">
                    <a href="/company/"><div><i class="fa fa-university"></i> <span class="nav-label">{% trans "Companies" %}</span></div></a>
                    <a href="/mentor/"><div><i class="fa fa-graduation-cap"></i> <span class="nav-label">{% trans "Mentors" %}</span></div></a>
                    <a href="/founder/"><div><i class="fa fa-users"></i> <span class="nav-label">{% trans "Founders" %}</span></div></a>
                    {% if isCentech %}
                    <a href="/company/presence/"><div><i class="fa fa-graduation-cap"></i> <span class="nav-label">{% trans "Presence" %}</span></div></a>
                        <select id="selectCompany" class="menuDashboard" onchange="updateMenu(this.value)">
                            <option value="0">{% trans "Select a company" %}</option>
                            {% for company in list_company %}
                                {% if request.session.companySelected == company.id %}
                                    <option value="{{ company.id }}" selected="selected">{{ company.name }}</option>
                                {% else %}
                                    <option value="{{ company.id }}" >{{ company.name }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        {% if request.session.companySelected %}
                            <a class="menuIrl" href="/kpi/irl/{{request.session.companySelected}}"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "IRL" %}</span></div></a>
                            <a class="menuTrl" href="/kpi/trl/{{request.session.companySelected}}"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "TRL" %}</span></div></a>
                            <a class="menuExperiment" href="/experiment/{{request.session.companySelected}}"><div><i class="fa fa-flask"></i> <span class="nav-label">{% trans "Experiments" %}</span></div></a>
                            <a class="menuBusinessCanvas" href="/businessCanvas/{{request.session.companySelected}}"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Business Model Canvas" %}</span></div></a>
                            <a class="menuValuePropositionCanvas" href="/valuePropositionCanvas/{{request.session.companySelected}}"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Value Proposition Canvas" %}</span></div></a>
                            <a class="menuFinance" href="/finance/{{request.session.companySelected}}"><div><i class="fa fa-usd"></i> <span class="nav-label">{% trans "Finance" %}</span></div></a>

                        {% else %}
                            <a class="menuIrl" style="visibility: hidden;" href="/kpi/irl"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "IRL" %}</span></div></a>
                            <a class="menuTrl" style="visibility: hidden;" href="/kpi/trl"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "TRL" %}</span></div></a>
                            <a class="menuExperiment" style="visibility: hidden;" href="/experiment"><div><i class="fa fa-flask"></i> <span class="nav-label">{% trans "Experiments" %}</span></div></a>
                            <a class="menuBusinessCanvas" style="visibility: hidden;" href="/businessCanvas"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Business Model Canvas" %}</span></div></a>
                            <a class="menuValuePropositionCanvas" style="visibility: hidden;" href="/valuePropositionCanvas"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Value Proposition Canvas" %}</span></div></a>
                            <a class="menuFinance" style="visibility: hidden;" href="/finance"><div><i class="fa fa-usd"></i> <span class="nav-label">{% trans "Finance" %}</span></div></a>

                        {% endif %}
                    {% elif isMentor %} <!-- Is not a Centech but a Mentor -->
                        <select id="selectCompany" class="menuDashboard" onchange="updateMenu(this.value)">
                            <option value="0">{% trans "Select a company" %}</option>
                            {% for company in list_company_mentor %}
                                {% if request.session.companySelected == company.id %}
                                    <option value="{{ company.id }}" selected="selected">{{ company.name }}</option>
                                {% else %}
                                    <option value="{{ company.id }}" >{{ company.name }}</option>
                                {% endif %}
                            {% endfor %}
                        </select>
                        {% if request.session.companySelected %}
                            <a class="menuIrl" href="/kpi/irl/{{request.session.companySelected}}"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "IRL" %}</span></div></a>
                            <a class="menuTrl" href="/kpi/trl/{{request.session.companySelected}}"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "TRL" %}</span></div></a>
                            <a class="menuExperiment" href="/experiment/{{request.session.companySelected}}"><div><i class="fa fa-flask"></i> <span class="nav-label">{% trans "Experiments" %}</span></div></a>
                            <a class="menuBusinessCanvas" href="/businessCanvas/{{request.session.companySelected}}"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Business Model Canvas" %}</span></div></a>
                            <a class="menuValuePropositionCanvas" href="/valuePropositionCanvas/{{request.session.companySelected}}"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Value Proposition Canvas" %}</span></div></a>
                            <a class="menuFinance" href="/finance/{{request.session.companySelected}}"><div><i class="fa fa-usd"></i> <span class="nav-label">{% trans "Finance" %}</span></div></a>
                        {% else %}
                            <a class="menuIrl" style="visibility: hidden;" href="/kpi/irl"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "IRL" %}</span></div></a>
                            <a class="menuTrl" style="visibility: hidden;" href="/kpi/trl"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "TRL" %}</span></div></a>
                            <a class="menuExperiment" style="visibility: hidden;" href="/experiment"><div><i class="fa fa-flask"></i> <span class="nav-label">{% trans "Experiments" %}</span></div></a>
                            <a class="menuBusinessCanvas" style="visibility: hidden;" href="/businessCanvas"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Business Model Canvas" %}</span></div></a>
                            <a class="menuValuePropositionCanvas" style="visibility: hidden;" href="/valuePropositionCanvas"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Value Proposition Canvas" %}</span></div></a>
                            <a class="menuFinance" style="visibility: hidden;" href="/finance"><div><i class="fa fa-usd"></i> <span class="nav-label">{% trans "Finance" %}</span></div></a>
                        {% endif %}
                    {% else %} <!-- Not a Centech or Mentor -->
                        <a class="menuIrl" href="/kpi/irl/{{userCompanyId}}"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "IRL" %}</span></div></a>
                        <a class="menuTrl" href="/kpi/trl/{{userCompanyId}}"><div><i class="fa fa-bar-chart"></i> <span class="nav-label">{% trans "TRL" %}</span></div></a>
                        <a class="menuExperiment" href="/experiment/{{userCompanyId}}"><div><i class="fa fa-flask"></i> <span class="nav-label">{% trans "Experiments" %}</span></div></a>
                        <a class="menuBusinessCanvas" href="/businessCanvas/{{userCompanyId}}"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Business Model Canvas" %}</span></div></a>
                        <a class="menuValuePropositionCanvas" href="/valuePropositionCanvas/{{userCompanyId}}"><div><i class="fa fa-table"></i> <span class="nav-label">{% trans "Value Proposition Canvas" %}</span></div></a>
                        <a class="menuFinance" href="/finance/{{userCompanyId}}"><div><i class="fa fa-usd"></i> <span class="nav-label">{% trans "Finance" %}</span></div></a>
                    {% endif %}
                </li>
                <li>

            </ul>

        </div>
    </nav>

    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top white-bg" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i>
                    </a>
                    <table style="margin: 14px 5px 5px 20px;">
                      <tr>
                          <td><img src="{% static 'img/centech-logo.png' %}" width="40"></td>
                          <td style="margin-left: 14px;"><img src="{% static 'img/centech_banner.png' %}" width="200"></td>
                      </tr>
                    </table>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message">{% trans "Welcome to the Centech Dashboard." %}</span>
                    </li>
                    <!-- MENU PROFIL -->
                    <li class="dropdown">
                            <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                                <i class="fa fa-cog fa-2x"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-messages">
                            {% if isMentor %}
                                <li>
                                    {% with profile=user.profile %}
                                    <a href="/mentor/profile/{{ profile.userProfile_id }}" style="text-decoration: none; color: black; font-size: 14px;">
                                       <div class="dropdown-messages-box">
                                            <i class="fa fa-user"></i> {% trans "Update profile" %}
                                        </div>
                                    </a>
                                    {% endwith %}
                                </li>
                            {% elif isFounder %}

                                <li>
                                    {% with profile=user.profile %}
                                    <a href="/founder/profile/{{ profile.userProfile_id }}" style="text-decoration: none; color: black; font-size: 14px;">
                                        <div class="dropdown-messages-box">
                                            <i class="fa fa-user"></i> {% trans "Update profile" %}
                                        </div>
                                    </a>
                                    {% endwith %}
                                </li>
                                <li>
                                    <a href="/company/update/{{ userCompanyId }}" style="text-decoration: none; color: black; font-size: 14px;">
                                        <div class="dropdown-messages-box">
                                            <i class="fa fa-university"></i> {% trans "Update company" %}
                                        </div>
                                    </a>
                                </li>
                            {% elif isCentech %}
                                <li>
                                    <a href="/company/status/add/" style="text-decoration: none; color: black; font-size: 14px;">
                                        <div class="dropdown-messages-box">
                                            <i class="fa fa-tags"></i> {% trans "Add new status" %}
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="/company/add/" style="text-decoration: none; color: black; font-size: 14px;">
                                        <div class="dropdown-messages-box">
                                            <i class="fa fa-university"></i> {% trans "Add new company" %}
                                        </div>
                                    </a>
                                </li>
                        {% endif %}
                                <li>
                                    <a href="/user/password/{{ user.id }}" style="text-decoration: none; color: black; font-size: 14px;">
                                        <div class="dropdown-messages-box">
                                            <i class="fa fa-key"></i> {% trans "Change password" %}
                                        </div>
                                    </a>
                                </li>
                                <li>
                                    <a href="/user/logout" style="text-decoration: none; color: black; font-size: 14px;">
                                        <div class="dropdown-messages-box">
                                            <i class="fa fa-sign-out pull-left"></i> {% trans "Log out" %}
                                        </div>
                                    </a>
                                </li>
                            </ul>
                        </li>
                </ul>

            </nav>
        </div>
        <!-- Page Content -->
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div id="content">
                        {% if messages %}
                            <div class="panel-body well" style="background-color: lightgrey; margin-top: 50px; margin-bottom: 50px; padding: 10px 0 5px 0; font-weight: bold;">
                                <ul id="message" style="list-style-type: none; ">
                                    {% for message in messages %}
                                        {% if message.tags == 'error' %}
                                            <li style="color: #d60910;">{{ message }}</li>
                                        {% elif message.tags == 'success'%}
                                            <li style="color: #339900;">{{ message }}</li>
                                        {% elif message.tags == 'info'%}
                                            <li style="color: #3366cc;">{{ message }}</li>
                                        {% elif message.tags == 'warning'%}
                                            <li style="color: orange;">{{ message }}</li>
                                        {% else %}
                                            <li>{{ message }}</li>
                                        {% endif %}
                                    {% endfor %}
                                </ul>
                            </div>
                        {% endif %}
                        {% block content %}{% endblock %}
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Mainly scripts -->
    <script src="{% static 'js/jquery.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'INSPINIA-theme/js/plugins/metisMenu/jquery.metisMenu.js' %}"></script>
    <script src="{% static 'INSPINIA-theme/js/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>

    <!-- Custom and plugin javascript -->
    <script src="{% static 'INSPINIA-theme/js/inspinia.js' %}"></script>
    <script src="{% static 'INSPINIA-theme/js/plugins/pace/pace.min.js' %}"></script>

    <!-- jQuery UI -->
    <script src="{% static 'jquery-ui-1.11.4/jquery-ui.min.js' %}"></script>
    <script src="{% static 'js/jquery.tablednd_0_5.js' %}"></script>

    <!-- Jvectormap -->
    <script src="{% static 'INSPINIA-theme/js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js' %}"></script>
    <script src="{% static 'INSPINIA-theme/js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js' %}"></script>

    <!-- Sparkline -->
    <script src="{% static 'INSPINIA-theme/js/plugins/sparkline/jquery.sparkline.min.js' %}"></script>
    <script src="{% static 'js/main.js' %}"></script>
    {% block extrajs %}{% endblock %}
</body>
</html>